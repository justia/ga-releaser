"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.jsonParseRelaxed = exports.isGitHubAction = exports.dirname = exports.isBoolean = exports.parseInputBoolean = void 0;
const path_1 = __importDefault(require("path"));
exports.parseInputBoolean = (value, defaultValue) => value !== undefined && value !== '' ? value === 'true' : defaultValue;
exports.isBoolean = (val) => typeof val === 'boolean';
exports.dirname = path_1.default.resolve(__dirname);
exports.isGitHubAction = process.env.GITHUB_ACTIONS === 'true';
exports.jsonParseRelaxed = (badJson) => badJson
    // Replace ":" with "@colon@" if it's between double-quotes
    .replace(/:\s*"([^"]*)"/g, (_match, p1) => {
    return `: "${p1.replace(/:/g, '@colon@')}"`;
})
    // Replace ":" with "@colon@" if it's between single-quotes
    .replace(/:\s*'([^']*)'/g, (_match, p1) => {
    return `: "${p1.replace(/:/g, '@colon@')}"`;
})
    // Add double-quotes around any tokens before the remaining ":"
    .replace(/(['"])?([a-z0-9A-Z_]+)(['"])?\s*:/g, '"$2": ')
    // Turn "@colon@" back into ":"
    .replace(/@colon@/g, ':');
